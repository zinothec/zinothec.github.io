"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function r(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,s){return t&&r(e.prototype,t),s&&r(e,s),e}}(),FeedList=function(){function o(e){_classCallCheck(this,o);var n=this,t=document.body,s="feedLists",r={selector:document.getElementById("mint-feedLists"),home_url:window.location.protocol+"//"+window.location.hostname,label:"",thumbnail:"s200-c",length:4,render:"default",loader:this.loader(),summary:64},a=this.mergeObject(r,e),i=a.label?"/-/"+a.label:"",l=a.length?"&max-results="+a.length:"&max-results=6",c=a.home_url+"/feeds/posts/default"+i+"?alt=json-in-script&callback="+s+l;t.appendChild(this.script(c)),a.selector.innerHTML=a.loader,window[s]=function(e){var t=e.feed.entry,s="";if(a.selector.innerHTML="",void 0!==t){for(var r=0;r<t.length;r++)s+=n.render(n.renderManagementItem(a.render),t[r],a);a.selector.innerHTML=n.renderContent(s,a)}else a.selector.innerHTML='<div class="mint-feedList__messages">El blog '+n.getHostname(a.home_url)+" no tiene entradas p?blicadas o est? en modo privado.</div>"}}return _createClass(o,[{key:"render",value:function(e,n,a){var i=this;return e.replace(/TITLE|URL|IMAGE|SUMMARY|TAG|CATEGORY|TIMESTAMP/g,function(e){switch(e){case"TITLE":return n.title.$t;case"URL":return i.getLink(n);case"IMAGE":return i.getThumbnail(n.media$thumbnail.url,a);case"SUMMARY":return i.getSummary(n,a);case"TAG":for(var t=i.getTags(n),s="",r=0;r<t.length;r++)s+='<a href="'+a.home_url+"search/label/"+t[r]+'">'+t[r]+"</a>";return s;case"CATEGORY":return i.getTags(n)[0];case"TIMESTAMP":return i.getTimestamp(n)}})}},{key:"getLink",value:function(e){for(var t=e.link,s=0;s<t.length;s++)if("alternate"==t[s].rel)return t[s].href}},{key:"getThumbnail",value:function(e,t){if(e)return e.replace("s72-c",t.thumbnail)}},{key:"getSummary",value:function(e,t){return(e.content?e.content:e.summary).$t.replace(/(<([^>]+)>)/g,"").substr(0,t.summary)+"..."}},{key:"getTags",value:function(e){for(var t=[],s=0;s<e.category.length;s++)t[s]=e.category[s].term;return t}},{key:"getTimestamp",value:function(e){return new Date(e.published.$t).toLocaleDateString("es-ES")}},{key:"getHostname",value:function(e){var t=document.createElement("a");return t.href=e,t.hostname}},{key:"renderManagementItem",value:function(e){switch(e){case"default":return this.renderItems();case"overlay":return this.renderItemsOverlay();default:return"function"==(void 0===e?"undefined":_typeof(e))?e():this.renderItems}}},{key:"renderContent",value:function(s,r){return'<div class="mint-feedList MODE">ITEM</div>'.replace(/MODE|ITEM/g,function(e){switch(e){case"ITEM":return s;case"MODE":var t=_typeof(r.render);if("function"==t)return"custom";if("string"==t)return r.render}})}},{key:"renderItems",value:function(){return'<div class="mint-feedList-item">','<div class="mint-feedList-item__image"><img src="IMAGE" alt="TITLE"></div>','<div class="mint-feedList-item__content">','<a href="URL" target="_blank" class="mint-feedList-item__title">TITLE</a>','<p class="mint-feedList-item__summary">SUMMARY</p>',"</div>","</div>",'<div class="mint-feedList-item"><div class="mint-feedList-item__image"><img src="IMAGE" alt="TITLE"></div><div class="mint-feedList-item__content"><a href="URL" target="_blank" class="mint-feedList-item__title">TITLE</a><p class="mint-feedList-item__summary">SUMMARY</p></div></div>'}},{key:"renderItemsOverlay",value:function(){return'<div class="mint-feedList-item">','<div class="mint-feedList-item__image">','<a href="URL" target="_blank"><img src="IMAGE" alt="TITLE"></a>','<span class="mint-feedList-item__title">TITLE</span>',"</div>",'<div class="mint-feedList-item__content">','<div class="mint-feedList-item__meta">','<span class="tags">CATEGORY</span>','<span class="timestamp"> TIMESTAMP</span>',"</div>",'<p class="mint-feedList-item__summary">SUMMARY</p>',"</div>","</div>",'<div class="mint-feedList-item"><div class="mint-feedList-item__image"><a href="URL" target="_blank"><img src="IMAGE" alt="TITLE"></a><span class="mint-feedList-item__title">TITLE</span></div><div class="mint-feedList-item__content"><div class="mint-feedList-item__meta"><span class="tags">CATEGORY</span><span class="timestamp"> TIMESTAMP</span></div><p class="mint-feedList-item__summary">SUMMARY</p></div></div>'}},{key:"loader",value:function(){return'<div class="mint-feedList__loader"><span class="mint-feedList__spinner"></span></div>'}},{key:"script",value:function(e){var t=document.createElement("script");return t.src=e,t}},{key:"mergeObject",value:function(e,t){var s;for(s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e}}]),o}();
